<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Animated Counter â€“ Per Digit Animation</title>
  <style>
    /* Use only two colors: black and white */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: black; /* Background is black */
      margin: 0;
    }
    /* The counter container now uses flex so that each digit is in its own box */
    #counter {
      display: flex;
      border: 2px solid white; /* Border is white */
      border-radius: 8px;
      background-color: black; /* Background is black */
      overflow: hidden;
    }
    /* Each digit container holds one digit and hides overflow */
    .digit-container {
      position: relative;
      width: 40px;   /* Adjust as needed */
      height: 70px;
      overflow: hidden;
      /* Optional: add a border between digits */
      border-right: 1px solid white;
    }
    /* Remove the right border from the last digit container */
    .digit-container:last-child {
      border-right: none;
    }
    /* The digit element is absolutely positioned within its container */
    .digit {
      position: absolute;
      left: 0;
      width: 100%;
      font-size: 48px;
      line-height: 70px;
      text-align: center;
      color: white; /* Digit text is white */
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <!-- The counter container. We store the current number as a data attribute -->
  <div id="counter" data-current="0">
    <!-- Initially the counter has one digit (0) -->
    <div class="digit-container">
      <span class="digit current">0</span>
    </div>
  </div>

  <script>
    let count = 0;

    // This function animates the change of one digit in its container.
    function animateDigitChange(container, newDigit) {
      const currentSpan = container.querySelector('.digit.current');
      // Create a new span for the new digit
      const newSpan = document.createElement('span');
      newSpan.classList.add('digit', 'new');
      newSpan.innerText = newDigit;
      // Start off positioned below the visible area
      newSpan.style.transform = 'translateY(100%)';
      container.appendChild(newSpan);

      // Force a reflow so that the browser applies the starting position
      newSpan.offsetHeight;

      // Apply transition effects to both elements
      currentSpan.style.transition = 'transform 0.5s ease-out';
      newSpan.style.transition = 'transform 0.5s ease-out';

      // Animate: slide the current digit up, and slide the new digit into view
      currentSpan.style.transform = 'translateY(-100%)';
      newSpan.style.transform = 'translateY(0)';

      // After the animation completes, remove the old element and mark the new one as current
      setTimeout(() => {
        currentSpan.remove();
        newSpan.classList.remove('new');
        newSpan.classList.add('current');
      }, 500);
    }

    // This function updates the entire counter number.
    // It splits the new number into digits, adds or removes digit containers if needed,
    // and then animates any digit that has changed.
    function updateCounter(newValue) {
      const counter = document.getElementById('counter');
      const newStr = newValue.toString();
      const currentStr = counter.getAttribute('data-current') || "";

      // Adjust the number of digit containers if the new number has a different length.
      // We insert new containers at the beginning (the most-significant digit).
      while (counter.children.length < newStr.length) {
        const container = document.createElement('div');
        container.classList.add('digit-container');
        counter.insertBefore(container, counter.firstChild);
      }
      while (counter.children.length > newStr.length) {
        counter.removeChild(counter.firstChild);
      }

      // Now update each digit container (they are ordered from most-significant to least)
      const digitContainers = counter.querySelectorAll('.digit-container');
      for (let i = 0; i < newStr.length; i++) {
        const newDigit = newStr[i];
        const container = digitContainers[i];
        const currentDigitElem = container.querySelector('.digit.current');
        const currentDigit = currentDigitElem ? currentDigitElem.innerText : "";
        if (currentDigit !== newDigit) {
          if (currentDigitElem) {
            animateDigitChange(container, newDigit);
          } else {
            // If there is no current digit (for a newly added container), just add it.
            const span = document.createElement('span');
            span.classList.add('digit', 'current');
            span.innerText = newDigit;
            container.appendChild(span);
          }
        }
      }

      // Store the new number as the current value.
      counter.setAttribute('data-current', newStr);
    }

    // Every second, with a 50% chance we increase the counter by 1.
    setInterval(() => {
      if (Math.random() < 0.5) {
        count++;
        updateCounter(count);
      }
    }, 1000);
  </script>
</body>
</html>
